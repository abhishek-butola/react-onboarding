{"code":"import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { OnboardingService } from '../../core/services/core.service';\r\nimport { enhanceStep, calculateNumberOfSteps } from '../../core/index.core';\r\nimport { STEP_TYPE_KEY, END_TYPE_KEY } from '../../core/constants';\r\nconst { Provider, Consumer } = React.createContext();\r\nclass Onboarding extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.nextStep = () => {\r\n            const { currentStep } = this.state;\r\n            // Check if we want to move beyond the last step\r\n            if (currentStep + 1 >= this.numberOfSteps)\r\n                return;\r\n            this.setState(prevState => ({\r\n                ...prevState,\r\n                currentStep: prevState.currentStep + 1,\r\n            }));\r\n        };\r\n        this.prevStep = () => {\r\n            const { currentStep } = this.state;\r\n            // Check if we want to move beyond the first step\r\n            if (currentStep - 1 < 0)\r\n                return;\r\n            this.setState(prevState => ({\r\n                ...prevState,\r\n                currentStep: prevState.currentStep - 1,\r\n            }));\r\n        };\r\n        this.onboardingRenderer = () => {\r\n            const { children, finished } = this.props;\r\n            const { currentStep } = this.state;\r\n            let encounteredStep = 0;\r\n            let stepFound = false;\r\n            const extendedChildrens = children\r\n                .filter(child => {\r\n                // Is this child not an object (React Component | DOM Element) type? We don't want it then\r\n                // This is due to certain stuff like: {!onboardingComplete && <header>Onboarding process</header>}\r\n                // The described code above will make the children be literally false when !onboardingComplete\r\n                // This way we can skip trying to render a false value\r\n                if (typeof child !== 'object')\r\n                    return false;\r\n                // Is the form not finished and we're trying to render the end component?\r\n                if (!finished && child.type.name === END_TYPE_KEY)\r\n                    return false;\r\n                // Is the form not finished and we're trying to render anything but a step or and end component?\r\n                if (!finished && child.type.name !== END_TYPE_KEY && child.type.name !== STEP_TYPE_KEY)\r\n                    return true;\r\n                // Is the form not finished and we're trying to render a step?\r\n                if (!finished && child.type.name === STEP_TYPE_KEY) {\r\n                    // Is this the step we would like to render?\r\n                    if (encounteredStep === currentStep && !stepFound) {\r\n                        // Yes, this is the step we would like to render\r\n                        stepFound = true; // Raise the flag\r\n                        return true; // Return this step\r\n                    }\r\n                    // If it's not, increase the counter to check for next step\r\n                    encounteredStep = encounteredStep + 1;\r\n                    // Do not return this component\r\n                    return false;\r\n                }\r\n                // Is the form finished and we're trying to render anything but a step?\r\n                if (finished && child.type.name !== STEP_TYPE_KEY)\r\n                    return true;\r\n            })\r\n                .map(child => {\r\n                if (child.type.name !== STEP_TYPE_KEY)\r\n                    return child;\r\n                // Enhance the step with the nextStep & prevStep functions\r\n                return enhanceStep(child, {\r\n                    nextStep: this.nextStep,\r\n                    prevStep: this.prevStep,\r\n                });\r\n            });\r\n            return extendedChildrens;\r\n        };\r\n        this.state = {\r\n            initialStep: props.initialStep || 0,\r\n            currentStep: props.initialStep || 0,\r\n        };\r\n        this.numberOfSteps = calculateNumberOfSteps(props.children);\r\n    }\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        const { currentStep } = this.state;\r\n        const { finished } = this.props;\r\n        return currentStep !== nextState.currentStep || finished !== nextProps.finished;\r\n    }\r\n    render() {\r\n        const { currentStep } = this.state;\r\n        return (React.createElement(Provider, { value: {\r\n                numberOfSteps: this.numberOfSteps,\r\n                currentStep: currentStep + 1,\r\n                onboarding: OnboardingService.tree,\r\n                prevStep: this.prevStep,\r\n                nextStep: this.nextStep,\r\n            } }, this.onboardingRenderer()));\r\n    }\r\n}\r\nOnboarding.propTypes = {\r\n    initialStep: PropTypes.number,\r\n    finished: PropTypes.bool,\r\n};\r\nexport { Onboarding, Consumer as Info };\r\n//# sourceMappingURL=onboarding.component.js.map","map":"{\"version\":3,\"file\":\"onboarding.component.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/components/onboarding/onboarding.component.tsx\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/alexcasillas/own-libraries/react-onboarding/components/onboarding/onboarding.component.d.ts","writeByteOrderMark":false,"text":"import React from 'react';\r\ndeclare const Consumer: any;\r\ndeclare class Onboarding extends React.Component {\r\n    constructor(props: any);\r\n    nextStep: () => void;\r\n    prevStep: () => void;\r\n    shouldComponentUpdate(nextProps: any, nextState: any): boolean;\r\n    onboardingRenderer: () => any;\r\n    render(): any;\r\n}\r\nexport { Onboarding, Consumer as Info };\r\n"}}
